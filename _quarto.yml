project:
  type: website
  output-dir: _site

execute:
  freeze: auto

# Custom build steps
pre-render:
  - "cd events && ./render-pdfs.sh"
  - "cd academy/events && ./render-pdfs.sh"
  - "cd academy/webinars && ./render-pdfs.sh"
  - "cd projects/manuscripts && quarto render"

website:
  title: "chen.ist"
  favicon: assets/images/favicon.png
  site-url: https://github/com/chen.ist
  description: "Innovative technology & education"
  twitter-card: true
  open-graph: true
  navbar:
    logo: assets/images/logo-light.svg
    logo-alt: "chen.ist Logo"
    title: false
    background: "#323642"
    foreground: "#E5E3DA"
    left:
      - href: index.qmd
        text: Home
      - href: services.qmd
        text: Services
      - text: Academy
        menu:
          - href: academy/overview.qmd
            text: Overview
          - href: academy/courses.qmd
            text: Courses
          - href: academy/events.qmd
            text: Events
          - href: academy/webinars.qmd
            text: Webinars
          - href: academy/computerclub.qmd
            text: Computer Club
          - href: academy/partnerships.qmd
            text: Partnerships
      - href: blog.qmd
        text: Blogs
      - href: resources/index.qmd
        text: Resources
         

    right:
      - text: "About"
        menu:
          - href: about/index.qmd
            text: About
          - href: about/csr.qmd
            text: CSR
          - href: about/community.qmd
            text: Community
      - href: contact.qmd
        text: Contact
      - text: "Lang"
        menu:
          - href: index.qmd
            text: English
          - href: ro/index.qmd
            text: Romanian
          - href: sv/index.qmd
            text: Swedish
          - href: de/index.qmd
            text: German
        
  page-footer:
    border: false
    background: "transparent"
    foreground: "#e6e6e6"
    left: " "
    center: " "
    right: " "

format:
  html:
    theme:
      light: [flatly, scss/light.scss]
      dark: scss/dark.scss
    css: [scss/styles.css, scss/academy.scss]
    code-link: true
    link-external-icon: true
    link-external-newwindow: true
    smooth-scroll: true
    highlight-style: dracula
    toc: true
    toc-depth: 3
    code-copy: true
    code-overflow: wrap
    html-math-method: katex
    from: markdown+raw_html
    include-in-header:
      - text: |
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
          <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
      - file: includes/custom-header.html
    include-after-body: 
      - text: |
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              // Function to toggle dark/light mode
              function toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-bs-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                document.documentElement.setAttribute('data-bs-theme', newTheme);
                localStorage.setItem('quarto-color-scheme', newTheme);
                
                // Update icon if needed
                const themeIcon = document.querySelector('.navbar-nav a[href="#"] i');
                if (themeIcon) {
                  themeIcon.className = newTheme === 'light' ? 'bi bi-moon' : 'bi bi-sun';
                }
              }
              
              // Apply saved theme on load
              const savedTheme = localStorage.getItem('quarto-color-scheme');
              if (savedTheme) {
                document.documentElement.setAttribute('data-bs-theme', savedTheme);
                
                // Update icon to match saved theme
                const themeIcon = document.querySelector('.navbar-nav a[href="#"] i');
                if (themeIcon && savedTheme === 'dark') {
                  themeIcon.className = 'bi bi-sun';
                }
              }
              
              // Set up toggle button
              document.querySelectorAll('a[href="#"]').forEach(function(link) {
                if (link.textContent.includes('Toggle Theme')) {
                  link.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleTheme();
                  });
                }
              });
              
              // Enable Bootstrap tooltips
              var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
              var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
              });
              
              // Smooth scroll for anchor links
              document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                if (anchor.getAttribute('href') === '#') return;
                
                anchor.addEventListener('click', function(e) {
                  e.preventDefault();
                  const target = document.querySelector(this.getAttribute('href'));
                  if (target) {
                    window.scrollTo({
                      top: target.offsetTop - 70,
                      behavior: 'smooth'
                    });
                  }
                });
              });
            });
          </script>
      - file: includes/custom-footer.html

editor: visual

filters:
  - quarto-version.lua